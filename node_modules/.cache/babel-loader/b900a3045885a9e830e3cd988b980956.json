{"ast":null,"code":"var _jsxFileName = \"G:\\\\TheHeadStarter\\\\react-resume-dashboard\\\\src\\\\components\\\\upload2Firebase.js\",\n    _s = $RefreshSig$();\n\nimport { storage, db } from \"./config/firebaseConfig.js\";\nimport { ref as ref_storage, uploadBytesResumable } from \"firebase/storage\";\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport { toast } from 'react-toastify';\nimport { useDropzone } from \"react-dropzone\";\nimport UploadPrompt from \"./UploadPrompt.js\";\nimport { closeIcon } from \"../images/imageindex\";\nimport { set, ref as ref_database, onValue, remove, update } from 'firebase/database';\nimport { uid } from 'uid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Upload2firebase(_ref) {\n  _s();\n\n  let {\n    closeModal\n  } = _ref;\n  const [file, setFile] = useState(\"\");\n\n  const handleUpload = () => {\n    if (!file) {\n      alert(\"Please upload an file first!\");\n      return;\n    }\n\n    toast.success(\"Upload Success!\"); // Receives the storage reference and the file to upload.\n    // Only uploads one file currently\n\n    const storageRef = ref_storage(storage, `/resumes/${file[0].name}`);\n    const uploadTask = uploadBytesResumable(storageRef, file[0]);\n    setFile(\"\");\n    write2db(name);\n  }; // when file is selected, set file state to that of the selected files\n\n\n  const onDropAccepted = useCallback(acceptedFiles => {\n    setFile(acceptedFiles);\n  });\n  const {\n    getRootProps,\n    getInputProps,\n    acceptedFiles\n  } = useDropzone({\n    onDropAccepted\n  });\n  const [name, setName] = useState('');\n  const [names, setNames] = useState([]);\n  const [email, setEmail] = useState('');\n  const [phoneNum, setPhoneNum] = useState('');\n  const [location, setLocation] = useState('');\n  const [company, setCompany] = useState('');\n  const [skills, setSkills] = useState(''); //read\n\n  useEffect(() => {\n    onValue(ref_database(db, `/resumes`), snapshot => {\n      setNames([]);\n      const data = snapshot.val();\n\n      if (data !== null) {\n        Object.values(data).forEach(name => {\n          setNames(oldArray => [...oldArray, name]);\n        });\n      }\n    });\n  }, []); //write\n\n  const write2db = () => {\n    const uuid = uid();\n    set(ref_database(db, `/resumes/${uuid}`), {\n      uuid,\n      name,\n      email,\n      phoneNum,\n      location,\n      company,\n      skills\n    });\n    setName('');\n    setEmail('');\n    setPhoneNum('');\n    setLocation('');\n    setCompany('');\n    setSkills('');\n  }; // names.maps maps info according to name, will probably be on\n  // on resumeTile.js file\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n        className: \"dropzone\"\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input-zone\",\n        ...getInputProps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UploadPrompt, {\n        file: file\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"uploadNameContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Name\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"uploadNameForm\",\n        input: \"text\",\n        placeholder: \"enter name of applicant\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      className: \"uploadSubmitBtn\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"uploadCloseBtn\",\n      onClick: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: closeIcon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 69\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Upload2firebase, \"tIp9B5aqlbCgjYVtNUuWOEuik9Q=\", false, function () {\n  return [useDropzone];\n});\n\n_c = Upload2firebase;\nexport default Upload2firebase;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload2firebase\");","map":{"version":3,"names":["storage","db","ref","ref_storage","uploadBytesResumable","React","useEffect","useState","useCallback","toast","useDropzone","UploadPrompt","closeIcon","set","ref_database","onValue","remove","update","uid","Upload2firebase","closeModal","file","setFile","handleUpload","alert","success","storageRef","name","uploadTask","write2db","onDropAccepted","acceptedFiles","getRootProps","getInputProps","setName","names","setNames","email","setEmail","phoneNum","setPhoneNum","location","setLocation","company","setCompany","skills","setSkills","snapshot","data","val","Object","values","forEach","oldArray","uuid","className"],"sources":["G:/TheHeadStarter/react-resume-dashboard/src/components/upload2Firebase.js"],"sourcesContent":["import { storage , db} from \"./config/firebaseConfig.js\";\r\nimport { ref as ref_storage, uploadBytesResumable } from \"firebase/storage\";\r\nimport React, {useEffect, useState, useCallback } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport UploadPrompt from \"./UploadPrompt.js\"\r\nimport { closeIcon } from \"../images/imageindex\"\r\nimport { set, ref  as ref_database, onValue, remove, update } from 'firebase/database';\r\nimport { uid } from 'uid';\r\n\r\nfunction Upload2firebase({ closeModal }) {\r\n    const [file, setFile] = useState(\"\")\r\n\r\n    const handleUpload = () => {\r\n        if (!file) {\r\n            alert(\"Please upload an file first!\")\r\n            return\r\n        }\r\n        toast.success(\"Upload Success!\")\r\n\r\n        // Receives the storage reference and the file to upload.\r\n        // Only uploads one file currently\r\n        const storageRef = ref_storage(storage, `/resumes/${file[0].name}`)\r\n        const uploadTask = uploadBytesResumable(storageRef, file[0])\r\n        setFile(\"\");\r\n        write2db(name);\r\n\r\n    }\r\n\r\n    // when file is selected, set file state to that of the selected files\r\n    const onDropAccepted = useCallback((acceptedFiles) => {\r\n        setFile(acceptedFiles)\r\n    })\r\n\r\n    const { getRootProps, getInputProps, acceptedFiles } = useDropzone({ onDropAccepted })\r\n\r\n    const [name, setName] = useState('');\r\n    const [names, setNames] = useState([]);\r\n    const [email, setEmail] = useState('');\r\n    const [phoneNum, setPhoneNum] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const [company, setCompany] = useState('');\r\n    const [skills, setSkills] = useState('');\r\n  \r\n    //read\r\n    useEffect(() => {\r\n      onValue(ref_database(db, `/resumes`), (snapshot) => {\r\n        setNames([]);\r\n        const data = snapshot.val();\r\n        if (data !== null) {\r\n          Object.values(data).forEach((name) => {\r\n            setNames((oldArray) => [...oldArray, name]);\r\n          });\r\n        }\r\n      });\r\n    }, []);\r\n    //write\r\n    const write2db = () => {\r\n      const uuid = uid();\r\n      set(ref_database(db, `/resumes/${uuid}`), {\r\n        uuid,\r\n        name,\r\n        email,\r\n        phoneNum,\r\n        location,\r\n        company,\r\n        skills,\r\n      });\r\n      setName('');\r\n      setEmail('');\r\n      setPhoneNum('');\r\n      setLocation('');\r\n      setCompany('');\r\n      setSkills('');\r\n    };\r\n  \r\n    // names.maps maps info according to name, will probably be on\r\n    // on resumeTile.js file\r\n\r\n    return (\r\n        <div >\r\n            {/* dropzone component used for drag and drop files, acceptedFiles is [] of selected files */}\r\n            <div {...getRootProps({ className: \"dropzone\" })}>\r\n                <input className=\"input-zone\" {...getInputProps()} />\r\n                <UploadPrompt file={file} />\r\n            </div>\r\n            <div className=\"uploadNameContainer\">\r\n            <span>Name</span>\r\n            <input className=\"uploadNameForm\" input=\"text\" placeholder=\"enter name of applicant\"></input>\r\n            {/* </div><FirebaseDB/> */}\r\n            </div>\r\n            <button onClick={handleUpload} className=\"uploadSubmitBtn\">Submit</button>\r\n            <button className=\"uploadCloseBtn\" onClick={closeModal}><img src={closeIcon}></img></button>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Upload2firebase;"],"mappings":"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"},"metadata":{},"sourceType":"module"}