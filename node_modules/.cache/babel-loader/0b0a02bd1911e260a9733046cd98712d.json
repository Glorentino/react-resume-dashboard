{"ast":null,"code":"var _jsxFileName = \"G:\\\\TheHeadStarter\\\\react-resume-dashboard\\\\src\\\\components\\\\upload2Firebase.js\",\n    _s = $RefreshSig$();\n\nimport { storage } from \"./config/firebaseConfig.js\";\nimport { ref, uploadBytesResumable } from \"firebase/storage\";\nimport React, { useState, useCallback } from \"react\";\nimport { toast } from 'react-toastify';\nimport { useDropzone } from \"react-dropzone\";\nimport UploadPrompt from \"./UploadPrompt.js\";\nimport { closeIcon } from \"../images/imageindex\";\nimport FirebaseDB from \"./databaseUpload.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Upload2firebase(_ref) {\n  _s();\n\n  let {\n    closeModal\n  } = _ref;\n  const [file, setFile] = useState(\"\");\n\n  const handleUpload = () => {\n    if (!file) {\n      alert(\"Please upload an file first!\");\n      return;\n    }\n\n    toast.success(\"Upload Success!\"); // Receives the storage reference and the file to upload.\n    // Only uploads one file currently\n\n    const storageRef = ref(storage, `/resumes/${file[0].name}`);\n    const uploadTask = uploadBytesResumable(storageRef, file[0]);\n    setFile(\"\");\n  }; // when file is selected, set file state to that of the selected files\n\n\n  const onDropAccepted = useCallback(acceptedFiles => {\n    setFile(acceptedFiles);\n  });\n  const {\n    getRootProps,\n    getInputProps,\n    acceptedFiles\n  } = useDropzone({\n    onDropAccepted\n  });\n  const [name, setName] = useState('');\n  const [names, setNames] = useState([]);\n  const [email, setEmail] = useState('');\n  const [phoneNum, setPhoneNum] = useState('');\n  const [location, setLocation] = useState('');\n  const [company, setCompany] = useState('');\n  const [skills, setSkills] = useState(''); //read\n\n  useEffect(() => {\n    onValue(ref(db, `/resumes`), snapshot => {\n      setNames([]);\n      const data = snapshot.val();\n\n      if (data !== null) {\n        Object.values(data).forEach(name => {\n          setNames(oldArray => [...oldArray, name]);\n        });\n      }\n    });\n  }, []); //write\n\n  const write2db = () => {\n    const uuid = uid();\n    set(ref(db, `/resumes/${uuid}`), {\n      uuid,\n      name,\n      email,\n      phoneNum,\n      location,\n      company,\n      skills\n    });\n    setName('');\n    setEmail('');\n    setPhoneNum('');\n    setLocation('');\n    setCompany('');\n    setSkills('');\n  }; // names.maps maps info according to name, will probably be on\n  // on resumeTile.js file\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps({\n        className: \"dropzone\"\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"input-zone\",\n        ...getInputProps()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UploadPrompt, {\n        file: file\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FirebaseDB, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleUpload,\n      className: \"uploadSubmitBtn\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"uploadCloseBtn\",\n      onClick: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: closeIcon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 69\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Upload2firebase, \"tIp9B5aqlbCgjYVtNUuWOEuik9Q=\", false, function () {\n  return [useDropzone];\n});\n\n_c = Upload2firebase;\nexport default Upload2firebase;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload2firebase\");","map":{"version":3,"names":["storage","ref","uploadBytesResumable","React","useState","useCallback","toast","useDropzone","UploadPrompt","closeIcon","FirebaseDB","Upload2firebase","closeModal","file","setFile","handleUpload","alert","success","storageRef","name","uploadTask","onDropAccepted","acceptedFiles","getRootProps","getInputProps","setName","names","setNames","email","setEmail","phoneNum","setPhoneNum","location","setLocation","company","setCompany","skills","setSkills","useEffect","onValue","db","snapshot","data","val","Object","values","forEach","oldArray","write2db","uuid","uid","set","className"],"sources":["G:/TheHeadStarter/react-resume-dashboard/src/components/upload2Firebase.js"],"sourcesContent":["import { storage } from \"./config/firebaseConfig.js\";\r\nimport { ref, uploadBytesResumable } from \"firebase/storage\";\r\nimport React, { useState, useCallback } from \"react\";\r\nimport { toast } from 'react-toastify';\r\nimport { useDropzone } from \"react-dropzone\";\r\nimport UploadPrompt from \"./UploadPrompt.js\"\r\nimport { closeIcon } from \"../images/imageindex\"\r\nimport FirebaseDB from \"./databaseUpload.js\";\r\n\r\nfunction Upload2firebase({ closeModal }) {\r\n    const [file, setFile] = useState(\"\")\r\n\r\n    const handleUpload = () => {\r\n        if (!file) {\r\n            alert(\"Please upload an file first!\")\r\n            return\r\n        }\r\n        toast.success(\"Upload Success!\")\r\n\r\n        // Receives the storage reference and the file to upload.\r\n        // Only uploads one file currently\r\n        const storageRef = ref(storage, `/resumes/${file[0].name}`)\r\n        const uploadTask = uploadBytesResumable(storageRef, file[0])\r\n\r\n        setFile(\"\")\r\n    }\r\n\r\n    // when file is selected, set file state to that of the selected files\r\n    const onDropAccepted = useCallback((acceptedFiles) => {\r\n        setFile(acceptedFiles)\r\n    })\r\n\r\n    const { getRootProps, getInputProps, acceptedFiles } = useDropzone({ onDropAccepted })\r\n\r\n    const [name, setName] = useState('');\r\n    const [names, setNames] = useState([]);\r\n    const [email, setEmail] = useState('');\r\n    const [phoneNum, setPhoneNum] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const [company, setCompany] = useState('');\r\n    const [skills, setSkills] = useState('');\r\n  \r\n    //read\r\n    useEffect(() => {\r\n      onValue(ref(db, `/resumes`), (snapshot) => {\r\n        setNames([]);\r\n        const data = snapshot.val();\r\n        if (data !== null) {\r\n          Object.values(data).forEach((name) => {\r\n            setNames((oldArray) => [...oldArray, name]);\r\n          });\r\n        }\r\n      });\r\n    }, []);\r\n    //write\r\n    const write2db = () => {\r\n      const uuid = uid();\r\n      set(ref(db, `/resumes/${uuid}`), {\r\n        uuid,\r\n        name,\r\n        email,\r\n        phoneNum,\r\n        location,\r\n        company,\r\n        skills,\r\n      });\r\n      setName('');\r\n      setEmail('');\r\n      setPhoneNum('');\r\n      setLocation('');\r\n      setCompany('');\r\n      setSkills('');\r\n    };\r\n  \r\n    // names.maps maps info according to name, will probably be on\r\n    // on resumeTile.js file\r\n\r\n    return (\r\n        <div>\r\n            {/* dropzone component used for drag and drop files, acceptedFiles is [] of selected files */}\r\n            <div {...getRootProps({ className: \"dropzone\" })}>\r\n                <input className=\"input-zone\" {...getInputProps()} />\r\n                <UploadPrompt file={file} />\r\n            </div>\r\n        \r\n            <FirebaseDB/>\r\n\r\n            <button onClick={handleUpload} className=\"uploadSubmitBtn\">Submit</button>\r\n            <button className=\"uploadCloseBtn\" onClick={closeModal}><img src={closeIcon}></img></button>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Upload2firebase;"],"mappings":"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"},"metadata":{},"sourceType":"module"}